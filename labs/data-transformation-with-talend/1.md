# **Data Transformation from DLP using Talend**

# **Introduction about Transformation**
<b>Data transformation</b> is the process of converting data or information from one format to another, usually from the format of a source system into the required format of a new destination system. 

# **Lab Overview**
In our learning lab, we are trying to use Talend Open Source Big data tool to perform transformation operation on CSV data file and save the data directly to Hadoop platform. Source data should be selected from DLP's Hadoop platform and the respective transformation would be applied from DLP's browser. In this learning lab, we will learn the transformation operation in below ways:  </br>

Section A: Download and Install Talend Open Studio for Big Data tool.</br>
Section B: Develop a Transformation Job using Talend Open Studio for Big Data Tool in user's local computer. </br>
Section C: Build Transformation Job using Talend Big Data Tool in user's local computer. </br>
Section D: Upload the transformation job in DLP platform and execute transformation and view and visualize the transformed data.</br>

# **Lab Overview**
1)	Using Talend Open Source Big Data Tool to create a ETL(Extraction, Transformation and Load) Job. </br>
2)	Managing (Upload, Execute, Delete, Share) Talend jobs from DLP platform. </br>
3)	Visualize transformed data from DLP platform. </br>

# **Prerequisites**
1) User must have to know the basic knowledgre of ETL.
2) Java 1.7+ should be pre-installed in User's computer.
3) Proper internet connectivity with User's computer.

<b>N.B:</b> In below, each section(Section A, B,C,D) are describing in details in step wise manner. User need to follow each step carefully.

**Section A: Download and Install Talend Open Studio for Big Data tool.**
Step 1: Check that Java in user's computer.
For executing Talend, JDK is required and need to be pre-installed in user's computer. Use the command(Java -version) in the command prompt. This command will show the JDK version installed in user's computer if Java is pre-installed already. 
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/javaVersion.PNG?raw=true)
</br>

![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/javaVersionUnix.PNG?raw=true)

If Java is not installed, then from the below mentioned URL, download Java and installed it first.

Step 2: Download Talend Open Studio for Big Data tool. </br>
Visit the below website for downloading the Talend Open Source Big data tool. 
https://www.talend.com/landing-download-ppc/big-data 
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/DownloadTalendTool.PNG?raw=true)
Input your details as mentioned on the form and click on <b>Download Now</b> details there and click on button to download the tool. 
</br>
Step 3: Unzip the downloased zip file and Start Talend.</br>
Talend tool will be downloaded in a zip file. It will take 10/15 minutes time to download based on your interest speed. On completion of the download, unzip the file and double click on Talend executable file which will open Talend Open Source Big Data transformation tool.
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/CreateTalendJob.PNG?raw=true)
</br>
Step 4: Create Talend Job.</br>
Unziping and Executing Talend executable file, will appear below UI. User can create a New Talend Project by selecting <b>Create a New Project.</b> and giving a Project name in the specified text box. 
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/CreateTalendJob.PNG?raw=true)
This will create a new Talend project and the designer UI will appear. In next steps, the details about the Talend Designer UI are described.
</br>
Step 5: Introduction about Talend Designer UI. </br>
After creating a new Talend job, the designer UI will appear. The details about the UI are given in below.
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/talendUIdesign.png?raw=true)
</br>
**Job Designes::** Job Creation Panel for creating a new transformation job. Details of creating new Talend job will be described in next steps.</br>
**Designer Palette::** For designing a new job, user can use this area to drag and drop differnet components from Pallate. </br>
**Talend Components Palatte::** Talend Open source Big data tool provide 900+ components for differnet transformation operation. User can select component(s) from this pallate and place those on designer area and connect them. Execution flow of job should be done based on the the connection of each component.
</br>

**Section B: Develop a Transformation Job using Talend Open Studio for Big Data Tool in user's local computer.**
In this section, we will learn the process of creating a new transformation Job using Talend Open Studio for Big data tool. 
**Example A:: Perform transformation on a CSV file by selecting few specific columns and save the transformed output file in DLP's hadoop platform.**
Step 1: Create a Talend Job. </br>
Right click on <b>Job Designs</b> from left panel and click on <b>Create Job</b>
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/createJobStep1.PNG?raw=true)
</br>
Step 2: Input Job Name </br>
After Step 1, Talend will appear below dialog box where user need to add the Job name and details about the job. Input the required details and click on the <b>Finish</b> button.
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/TalendJobNameAndDetails.PNG?raw=true)

This will create a new job. Job name can be viewed under <b>Job Designs</b> section. Job Name is showing in the red marked area in Talend tool.
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/TalendjobDisplayingJobDesigns.png?raw=true)
</br>
Step 3: Check the raw data file from DLP platfrom.
We are going to use Users11.csv file as a source file which is already placed in the hadoop platform. This CSV file has multiple columns and we need to pickup few columns from this CSV file and generate a new file with data. Below UI is showing Users11.csv file in DLP platform. </br>
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/Users11csvfile.png?raw=true)
</br>
Click on eye shaped <b>View</b> button to view the columns and records of Users11 csv file. We can view the columns of Users11 csv file from the below screen shots.
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/Users11csvfileRecords.PNG?raw=true)

Step 4: Design a job in Talend tool.</br>
In the Talend tool from, please below below components from right side pallate. </br>
**tHDFSConnection :** *This component is using to make a connection with Hadoop platform.* </br>
**tHDFSInput :** *This component is using to read a file from Hadoop platform.* </br>
**tHDFSOutput :** *This component is using to write a file in Hadoop platform.* </br>
<b>N.B :</b>*User can notice that the component name became tHDFSConnection_1. This indicate that there are one tHDFSConnection component placed in the designer plate.* </br>
After placing the above mentioned components in the designer area, the UI would be looks like below. 
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/TalendJobcomponents.PNG?raw=true)

Click on the <b>Contexts(TalendNewJob)</b> tab from the Talend tool. Here TalendNewJob is the talend job name.
Contexts are the area where we can defind the parameters which we like to pass to talend job program. For our talend job, we need to pass four(4) parameters. Click on the <b>+</b> symbol four times and it will create four parameters. Click on each parameter name and change the name as described in the below image. 

![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/talendcontextvariables.png?raw=true)
Details about the context parameters are given below. </br>
**hdfsuri_namenodepath:** *This parameter is used to contain the hdfs name node URI. Syntax of this parameter is hdfsuri_[any text].* </br>
**hdfspass_namenodepass:** *This parameter is used to contain the name node passwords. Syntax of this parameter is hdfspass_[any text].* </br>
**input_hdfsinputfile:** *This parameter is used to contain the hdfs path of user selected file. In this example, Users11 csv file path would be saved in this parameter. Syntax of this parameter is input_[any text].* </br>
**output_hdfsoutputfile:** *This parameter is used to contain hdfs path for output file name which should be generated by transformation job. Syntax of this parameter is output_[any text].* </br>

**Setting property for tHDFSConnection component.**
After the above step, <b>double click</b> on the <b>tHDFSConnection</b> component. Component section will appear in Talend designer studio. We need to set respective property for this component.
a) Change the Distribution to Cloudera as our DLP platform is build on Cloudera. </br>
b) Change Distribution version to Cloudera CDH5.4. </br>
c) Change name node uri as <b>context.hdfsuri_namenodepath</b> </br>
d) Change User name as <b>context.hdfspass_namenodeusername</b> </br>
e) Click on the Check box <b>Use Datanode Hostname</b>

**Setting property for tHDFSInput component.**
After setting the tHDFSConnection component properties, now we have to set the required properties for tHDFSInput component.
<b>Double clicking</b> on this component will display the image like below. 
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/ComponentPropertytHDFSInput.PNG?raw=true)
Follow the below changes on the tHDFSInput component tab. </br>
a) Click the checkbox named <b>Use an existing Connection.</b>.  </br>
b) Change the <b>File name</b> as context.input_hdfsinputfile. </br>
c) <b>Field seperator</b> should be comma(,).



![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/ComponentProperty.PNG?raw=true)


Double click on <b>tHDFSConnection</b> component. We need to set the properties for this component.





# ** (A)Develop transformation function from Talend Open studio for Big Data tool**
In this step, we will learn the process of developing Talend job. 

In this step, we will learn the process of developing Talend job. 
i)	Download Talend Open Source Big Data tool. 
Visit the below website for downloading the Talend Open Source Big data tool. If the tool is already downloaded, then we don¡¯t need to install again.
https://www.talend.com/landing-download-ppc/big-data 
Enter your details there and click on <b>¡°Download Now¡±</b> button to download the tool. 

![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/DownloadTalendTool.PNG?raw=true)

ii)	Open Talend Open Source for Big Data tool.
Talend tool will be downloaded in a zip file. It will take 10/15 minutes time to download based on your interest speed. On completion of the download,
unzip the file and double click on Talend executable file which will open Talend Open Source Big Data transformation tool.
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/CreateTalendJob.PNG?raw=true)


Below UI will appear. Select <b>Start Now</b> button.
![alt-img](https://github.com/CiscoDevNet/data-dev-learning-labs/blob/master/labs/data-transformation-with-talend/assets/images/TalendStartProject.PNG?raw=true)




